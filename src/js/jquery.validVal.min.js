(function(t){var i="validVal",e="validValField",a="5.0.2",s='textarea, select, input:not( [type="button"], [type="submit"], [type="reset"] )';if(t.fn[i]){return}function r(e,a){this.form=e;this.opts=t.extend(true,{},t.fn[i].defaults,a);this._gatherValidation();this._bindEvents();this._bindCustomEvents();this.addField(this.opts.validate.fields.filter(t(s,this.form)))}r.prototype={addField:function(a){if(n(a)||typeof a=="string"){a=t(a)}if(!(a instanceof t)){t.fn[i].debug('Not a valid argument for "$field"');return this}var s=this;return a.each(function(){var i=t(this),a=i.data(e);if(a){a.destroy()}i.data(e,new l(i,s))})},validate:function(i,a){var r=this;if(typeof i=="undefined"){i=this.form;a=true}else if(typeof a!="boolean"){a=false}if(typeof this.opts.form.onValidate=="function"){this.opts.form.onValidate.call(this.form[0],this.opts.language)}var l=t(),n={};this.opts.validate.fields.filter(t(s,i)).each(function(){var i=t(this),a=i.data(e);if(a){a.validate(r.opts.validate.onSubmit);if(a.valid){var s=i.val();if(i.is('[type="radio"]')||i.is('[type="checkbox"]')){if(!i.is(":checked")){s=""}}if(typeof s=="undefined"||s==null){s=""}n[i.attr("name")]=s}else{if(r.opts.validate.onSubmit!==false){l=l.add(i)}}}});if(l.length>0){if(typeof this.opts.form.onInvalid=="function"&&a){this.opts.form.onInvalid.call(this.form[0],l,this.opts.language)}return false}else{if(typeof this.opts.form.onValid=="function"&&a){this.opts.form.onValid.call(this.form[0],this.opts.language)}return n}},submitForm:function(){var i=this.validate();if(i){this.opts.validate.fields.filter(t(s,this.form)).each(function(){var i=t(this).data(e);if(i){i.clearPlaceholderValue()}})}return i},resetForm:function(){var i=this;if(typeof this.opts.form.onReset=="function"){this.opts.form.onReset.call(this.form[0],this.opts.language)}this.opts.validate.fields.filter(t(s,this.form)).each(function(){var a=t(this),s=a.data(e);if(s){if(s.placeholderValue!==false){a.addClass(i.opts.class.getClassName("inactive"));a.val(s.placeholderValue)}else{a.val(s.originalValue)}s.isValid(true,true)}});return true},options:function(i){if(typeof i=="object"){this.opts=t.extend(this.opts,i)}return this.opts},destroy:function(){this.form.unbind(".vv");this.form.data(i,null);this.opts.validate.fields.filter(t(s,this.form)).each(function(){var i=t(this).data(e);if(i){i.destroy()}});return true},_gatherValidation:function(){this.opts.validations={};if(t.fn[i].customValidations){this.opts.validations=t.extend(this.opts.validations,t.fn[i].customValidations)}if(this.opts.customValidations){this.opts.validations=t.extend(this.opts.validations,this.opts.customValidations)}this.opts.validations=t.extend(this.opts.validations,t.fn[i].defaultValidations);return this},_bindEvents:function(){var t=this;if(this.form.is("form")){this.form.attr("novalidate","novalidate");this.form.bind(o("submit"),function(i,e){if(typeof e!="boolean"){e=true}return e?t.submitForm():true});this.form.bind(o("reset"),function(i){return t.resetForm()})}return this},_bindCustomEvents:function(){var i=this;this.form.bind(o(["addField","destroy","validate","submitForm","resetForm","options"]),function(){arguments=Array.prototype.slice.call(arguments);var e=arguments.shift(),a=e.type;e.stopPropagation();if(typeof i[a]!="function"){t.fn.validVal.debug('Public method "'+a+'" not found.');return false}return i[a].apply(i,arguments)});return this}};function l(t,i){this.field=t;this.form=i;this.originalValue=this.field.attr("value")||"";this._gatherValidations();this._bindEvents();this._bindCustomEvents();this._init()}l.prototype={validate:function(a,r){var l=this;if(a===false){return}if(typeof r!="boolean"){r=true}this.valid=true;if(this.field.is(":hidden")&&!this.form.opts.validate.fields.hidden||this.field.is(":disabled")&&!this.form.opts.validate.fields.disabled){return true}if(r){this.clearPlaceholderValue()}if(typeof this.form.opts.fields.onValidate=="function"){this.form.opts.fields.onValidate.call(this.field[0],this.form.form,this.form.opts.language)}var n=false,o=d(this.field.val());for(var f in this.form.opts.validations){var h=this.form.opts.validations[f];if(typeof h=="function"&&t.inArray(f,this.validations)!=-1){if(!h.call(this.field[0],o)){n=f;break}}}this.valid=n?false:true;var u=this.valid?a!=="invalid":a!=="valid";this.isValid(this.valid,u,n);if(this.validationgroup!==false){t(s).not(this.field).each(function(){var i=t(this).data(e);if(i&&i.validationgroup==l.validationgroup){i.isValid(l.valid,true)}})}if(r){this.restorePlaceholderValue()}if(n){t.fn[i].debug("invalid validation: "+n)}return this.valid},isValid:function(t,i){if(typeof t=="boolean"){this.valid=t;if(i){var e=t?"onValid":"onInvalid";if(typeof this.form.opts.fields[e]=="function"){this.form.opts.fields[e].call(this.field[0],this.form.form,this.form.opts.language)}}}return this.valid},getValidations:function(){return this.validations},setValidations:function(i){if(typeof i=="string"){this.validations=i.split(" ")}else if(i instanceof Array){this.validations=i}else{t.fn.validVal.debug('Argument "validations" should be an array.')}return this.validations},addValidation:function(t){if(typeof t=="string"){t=t.split(" ")}for(var i in t){this.validations.push(t[i])}return this.validations},removeValidation:function(i){if(typeof i=="string"){i=i.split(" ")}for(var e in i){var a=t.inArray(i[e],this.validations);if(a!=-1){this.validations.splice(a,1)}}return this.validations},clearPlaceholderValue:function(){this._togglePlaceholderValue("clear");return true},restorePlaceholderValue:function(){this._togglePlaceholderValue("restore");return true},destroy:function(){this.field.unbind(".vv");this.field.data(e,null);return true},_gatherValidations:function(){this.autotab=false;this.corresponding=false;this.requiredgroup=false;this.validationgroup=false;this.placeholderValue=false;this.placeholderNumber=false;this.passwordplaceholder=false;this.validations=[];if(this.field.is("select")){this.originalValue=this.field.find("option:first").attr("value")||""}else if(this.field.is("textarea")){this.originalValue=this.field.text()}if(this.form.opts.supportHtml5){var e=this.field.data("vv-validations");if(e){this.validations.push(e);this.__removeAttr("data-vv-validations")}if(this.__hasHtml5Attr("placeholder")&&this.field.attr("placeholder").length>0){if(!t.fn[i].support.placeholder||t.inArray("placeholder",this.form.opts.keepAttributes)==-1){this.placeholderValue=this.field.attr("placeholder")}}if(this.placeholderValue!==false){this.__removeAttr("placeholder")}if(this.__hasHtml5Attr("pattern")&&this.field.attr("pattern").length>0){this.pattern=this.field.attr("pattern");this.validations.push("pattern");this.__removeAttr("pattern")}var a=["corresponding","requiredgroup","validationgroup"];for(var s=0,r=a.length;s<r;s++){var l=this.field.data("vv-"+a[s]);if(l){this[a[s]]=l;this.validations.push(a[s]);this.__removeAttr("data-vv-"+a[s])}}var n=["required","autofocus"];for(var o=0,r=n.length;o<r;o++){if(this.__hasHtml5Attr(n[o])){this.validations.push(n[o]);this.__removeAttr(n[o])}}var d=["number","email","url"];for(var h=0,r=d.length;h<r;h++){if(this.__hasHtml5Type(d[h])){this.validations.push(d[h])}}if(this.field.data("vv-autotab")){this.autotab=true;this.__removeAttr("data-vv-autotab")}}var u=this.field.attr("class");if(u&&u.length){if(this.field.hasClass("placeholder")){if(this.field.is("select")){var c=0,p=this.field.data("vv-placeholder-number");if(p){c=p;this.__removeAttr("data-vv-placeholder-number")}else if(typeof this.form.opts.selectPlaceholder=="number"){c=this.form.opts.selectPlaceholder}else{var v=this.field.find("option"),m=v.index(v.filter("[selected]"));if(m>-1){c=m}}this.placeholderNumber=c;this.originalValue=this.field.find("option:eq( "+c+" )").attr("value")||""}this.placeholderValue=this.originalValue;this.originalValue="";this.__removeClass("placeholder")}var g="corresponding:",b=u.indexOf(g);if(b!=-1){var y=u.substr(b).split(" ")[0],V=y.substr(g.length);if(V.length){this.corresponding=V;this.validations.push("corresponding");this.field.removeClass(y)}}if(this.field.hasClass("pattern")){this.pattern=this.field.attr("alt")||"";this.validations.push("pattern");this.__removeAttr("alt");this.__removeClass("pattern")}var _=["requiredgroup","validationgroup"];for(var C=0,r=_.length;C<r;C++){var A=_[C]+":",b=u.indexOf(A);if(b!=-1){var k=u.substr(b).split(" ")[0],x=k.substr(A.length);if(x.length){this[_[C]]=x;this.validations.push(_[C]);this.field.removeClass(k)}}}if(this.field.hasClass("autotab")){this.autotab=true;this.__removeClass("autotab")}}if(this.placeholderValue!==false&&this.field.is('[type="password"]')){this.passwordplaceholder=true}var u=this.field.attr("class");if(u&&u.length){this.validations.push(u)}this.validations=f(this.validations.join(" ").split(" "));return this},_bindEvents:function(){var i=this;this.field.bind(o("focus"),function(e){t(this).addClass(i.form.opts.class.getClassName("focus"));i.clearPlaceholderValue()});this.field.bind(o("blur"),function(e){t(this).removeClass(i.form.opts.class.getClassName("focus"));i.validate(i.form.opts.validate.onBlur)});this.field.bind(o("keyup"),function(t){if(!u(t.keyCode)){i.validate(i.form.opts.validate.onKeyup,false)}});if(this.field.is('select, input[type="checkbox"], input[type="radio"]')){this.field.bind(o("change"),function(i){t(this).trigger(o("blur"))})}return this},_bindCustomEvents:function(){var i=this;this.field.bind(o(["validate","isValid","destroy","addValidation","removeValidation"]),function(){arguments=Array.prototype.slice.call(arguments);var e=arguments.shift(),a=e.type;e.stopPropagation();if(typeof i[a]!="function"){t.fn.validVal.debug('Public method "'+a+'" not found.');return false}return i[a].apply(i,arguments)});this.field.bind(o(["validations"]),function(t,i,e){if(typeof i=="undefined"){return this.getValidations()}else{return this.setValidations(i,e)}});return this},_init:function(){var i=this;if(this.placeholderValue!==false){if(this.field.val()==""){this.field.val(this.placeholderValue)}if(this.passwordplaceholder){if(this.field.val()==this.placeholderValue)try{this.field[0].type="text"}catch(t){this.field[0].value=""}}if(this.field.val()==this.placeholderValue){this.field.addClass(i.form.opts.class.getClassName("inactive"))}if(this.field.is("select")){this.field.find("option:eq("+this.placeholderNumber+")").addClass(i.form.opts.class.getClassName("inactive"));this.field.bind(o("change"),function(e){t(this)[i.field.val()==i.placeholderValue?"addClass":"removeClass"](i.form.opts.class.getClassName("inactive"))})}}if(this.corresponding!==false){t(s).filter('[name="'+this.corresponding+'"]').bind(o("blur"),function(t){i.validate(i.form.opts.validate.onBlur)}).bind(o("keyup"),function(t){if(!u(t.keyCode)){i.validate(i.form.opts.validate.onKeyup,false)}})}if(this.autotab){var e=this.field.attr("maxlength"),a=this.field.attr("tabindex"),r=t(s).filter('[tabindex="'+(parseInt(a)+1)+'"]');if(this.field.is("select")){if(a){this.field.bind(o("change"),function(t){if(r.length){r.focus()}})}}else{if(e&&a){this.field.bind(o("keyup"),function(i){if(t(this).val().length==e){if(!u(i.keyCode)){t(this).trigger(o("blur"));if(r.length){r.focus()}}}})}}}if(t.inArray("autofocus",this.validations)!=-1&&!this.field.is(":disabled")){this.field.focus()}return this},_togglePlaceholderValue:function(t){if(this.placeholderValue!==false){if(t=="clear"){var i=this.placeholderValue,e="",a="removeClass",s="password"}else{var i="",e=this.placeholderValue,a="addClass",s="text"}if(this.field.val()==i&&!this.field.is("select")){this.field.val(e);this.field[a](this.form.opts.class.getClassName("inactive"));if(this.passwordplaceholder)try{this.field[0].type=s}catch(t){}}}return this},__hasHtml5Attr:function(t){if(typeof this.field.attr(t)=="undefined"){return false}if(this.field.attr(t)==="false"||this.field.attr(t)===false){return false}return true},__hasHtml5Type:function(i){if(this.field.attr("type")==i){return true}if(this.field.is('input[type="'+i+'"]')){return true}var e=t("<div />").append(this.field.clone()).html();if(e.indexOf('type="'+i+'"')!=-1||e.indexOf("type='"+i+"'")!=-1||e.indexOf("type="+i+"")!=-1){return true}return false},__removeAttr:function(i){if(t.inArray(i,this.form.opts.keepAttributes)==-1){this.field.removeAttr(i)}return this},__removeClass:function(i){if(t.inArray(i,this.form.opts.keepClasses)==-1){this.field.removeClass(i)}return this}};t.fn[i]=function(e,a){return this.each(function(){var s=t(this);if(s.data(i)){s.data(i).destroy()}s.data(i,new r(s,e,a))})};t.fn[i].version=a;t.fn[i].defaults={selectPlaceholder:0,supportHtml5:true,language:"cn",customValidations:{},validate:{onBlur:true,onSubmit:true,onKeyup:false,fields:{hidden:false,disabled:false,filter:function(t){return t}}},fields:{onValidate:null,onValid:function(){t(this).add(t(this).parent()).removeClass(t.fn[i].defaults.class.getClassName("invalid"))},onInvalid:function(){t(this).add(t(this).parent()).addClass(t.fn[i].defaults.class.getClassName("invalid"))}},form:{onReset:null,onValidate:null,onValid:null,onInvalid:function(t,i){switch(i){case"nl":msg="Let op, niet alle velden zijn correct ingevuld.";break;case"de":msg="Achtung, nicht alle Felder sind korrekt ausgefuellt.";break;case"es":msg="Atención, no se han completado todos los campos correctamente.";break;case"cn":msg="表单验证失败";break;case"en":default:msg="Attention, not all fields have been filled out correctly.";break}console.log(msg);t.first().focus()}},class:{prefix:"vv-",getClassName:function(t){if(typeof t=="string"){t=this.prefix+t}return t}},keepClasses:["required"],keepAttributes:["pattern","placeholder"]};t.fn[i].defaultValidations={required:function(i){var a=t(this);if(a.is('[type="radio"]')||a.is('[type="checkbox"]')){if(a.is('[type="radio"]')){var s=a.attr("name");if(s&&s.length>0){a=t('input[name="'+s+'"]')}}if(!a.is(":checked")){return false}}else if(a.is("select")){var r=a.data(e);if(r&&r.placeholderValue!==false){if(a.val()==r.placeholderValue){return false}}else{if(i.length==0){return false}}}else{if(i.length==0){return false}}return true},Required:function(e){return t.fn[i].defaultValidations.required.call(this,e)},requiredgroup:function(a){var r=t(this),l=r.data(e);if(l&&l.requiredgroup!==false){r=t();t(s).each(function(){var i=t(this).data(e);if(i&&i.requiredgroup==l.requiredgroup){r=r.add(this)}})}var n=false;r.each(function(){var e=this;if(t.fn[i].defaultValidations.required.call(e,d(t(e).val()))){n=true}});return n},corresponding:function(i){var a="",r=t(this).data(e);if(r&&r.corresponding!==false){var l=t(s).filter('[name="'+r.corresponding+'"]'),r=l.data(e);if(r){r.clearPlaceholderValue();a=d(l.val());r.restorePlaceholderValue()}return i==a}return false},number:function(t){t=h(t);if(t.length==0){return true}if(isNaN(t)){return false}return true},email:function(t){if(t.length==0){return true}var i=/^([a-zA-Z0-9_\.\-+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return i.test(t)},url:function(t){if(t.length==0){return true}if(t.match(/^www\./)){t="http://"+t}return t.match(/^(http\:\/\/|https\:\/\/)(.{4,})$/)},pattern:function(i){if(i.length==0){return true}var a=t(this),s=a.data(e);if(s){var r=s.pattern;if(r.slice(0,1)=="/"){r=r.slice(1)}if(r.slice(-1)=="/"){r=r.slice(0,-1)}return new RegExp(r).test(i)}}};t.fn[i].support={touch:function(){return"ontouchstart"in document.documentElement}(),placeholder:function(){return"placeholder"in document.createElement("input")}()};t.fn[i].debug=function(t){};t.fn[i].deprecated=function(t,i){if(typeof console!="undefined"){if(typeof console.error!="undefined"){console.error(t+" is DEPRECATED, use "+i+" instead.")}}};if(!t.fn.validValDebug){t.fn.validValDebug=function(e){t.fn[i].debug("validVal debugger not installed!");return this}}function n(t){if(typeof HTMLElement!="undefined"){return t instanceof HTMLElement}return t.nodeType&&t.nodeType==Node.ELEMENT_NODE}function o(t){if(typeof t=="string"){t=t.split(" ")}return t.join(".vv ")+".vv"}function f(i){return t.grep(i,function(e,a){return t.inArray(e,i)===a})}function d(t){if(t===null){return""}if(typeof t=="object"){var i=[];for(var e in t){i[e]=d(t[e])}return i}if(typeof t!="string"){return""}if(t.length==0){return""}return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function h(t){if(t===null){return""}if(typeof t=="object"){for(var i in t){t[i]=h(t[i])}return t}if(typeof t!="string"){return""}if(t.length==0){return""}t=d(t);var e=[" ","-","+","(",")","/","\\"];for(var a=0,s=e.length;a<s;a++){t=t.split(e[a]).join("")}return t}function u(t){switch(t){case 9:case 13:case 16:case 17:case 18:case 37:case 38:case 39:case 40:case 224:return true;break;default:return false;break}}})(jQuery);